---
title: 数组相关题目
date: 2023-2-14
category: 算法
tags: [算法, 字符串]
---

# P1009 [NOIP1998 普及组] 阶乘之和

`高精度` `数组`

## 题目描述

用高精度计算出 *S*=1!+2!+3!+⋯+*n*! (n<=50) 。

其中 `!` 表示阶乘.

## 输入格式

一个正整数 *n*。

## 输出格式

一个正整数 *S*，表示计算结果。

## 输入输出样例

**输入 #1**复制

```
3
```

**输出 #1**复制

```
9
```

## 说明/提示

**【数据范围】**

对于 100%100% 的数据，1≤*n*≤50。

**【其他说明】**

注，《深入浅出基础篇》中使用本题作为例题，但是其数据范围只有 *n*≤20，使用书中的代码无法通过本题。

如果希望通过本题，请继续学习第八章高精度的知识。

## AC代码

```c
//高精度大数相加
//求阶乘之和
#include<stdio.h>
#include<stdlib.h>
#define LEN 10000
int main()
{
    int fac[LEN+1]={0};//用来储存阶乘的数组
    int sum[LEN+1]={0};//用来储存阶乘之和
    int i,j,k,x;//x是用来表示进位的数
    int n;
    scanf("%d",&n);
    fac[1]=1;
    if(n==1)
    {
        printf("%d",fac[1]);
        return 0;
    }
    x=0;
    for(i=1;i<=n;i++)//计算从1到n的阶乘（乘一个加一个）
    {   
        for(j=1;j<=LEN;j++)//计算数组fac的每一位-->高精度乘法
        {
            fac[j]=fac[j]*i+x;//每一位都乘i+进位
            x=fac[j]/10;//x是fac[j]的十位数，即进位的数
            fac[j]=fac[j]%10;//fac[j]上仅保留个位数
        }
        for(j=1;j<=LEN;j++)//计算阶乘的和-->高精度加法
        {
            sum[j]=sum[j]+fac[j];
            if(sum[j]>=10)//如果需要进位
            {
                sum[j+1]++;//下一位进位
                sum[j]=sum[j]%10;//sum[j]保留个位数
            }
        }
    }
    for(i=LEN;i>=1;i--)//判断数组从哪一位开始，存的是有效数字（数组初始化为0，无效数字均为0）
    {
        if(sum[i]!=0)
            break;
    }
    for(j=i;j>=1;j--)//数组应该倒着输出，因为最后面的才是最高位
        printf("%d",sum[j]);
    return 0;
}
```

# P1957 口算练习题

atoi`函数` `字符串的转换` `字符串的读入`

scanf:`读到空格停止` `gets:读到回车停止`

## 题目描述

比如 5+8 的算式最好只要输入 5 和 8。对于上述输入进行处理后输出 5+8=13 以及该算式的总长度 6。

## 输入格式

第一行为数值 *i*

接着的 *i* 行为需要输入的算式，每行可能有三个数据或两个数据。

若该行为三个数据则第一个数据表示运算类型，a 表示加法运算，b表示减法运算，c 表示乘法运算，接着的两个数据表示参加运算的运算数。

若该行为两个数据，则表示本题的运算类型与上一题的运算类型相同，而这两个数据为运算数。

## 输出格式

输出 2×i* 行。对于每个输入的算式，输出完整的运算式及结果，第二行输出该运算式的总长度

**输入 #1**

```
4
a 64 46
275 125
c 11 99
b 46 64
```

**输出 #1**

```
64+46=110
9
275+125=400
11
11*99=1089
10
46-64=-18
9
```

## AC代码

```c
//P1957 口算练习题
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
char result[100],tmp[10];//result用来储存最终字符串，tmp用来临时储存
int main()
{
    int n,i,num1,num2;
    char x;//表示运算符
    scanf("%d",&n);//读入输入数据行数
    getchar();
    for(i=0;i<n;i++)
    {
        scanf("%s",&tmp);//scanf以空格为分隔，读到空格就会停止读入，所以只会读入第一个输入数据
        if(tmp[0]>='a'&&tmp[0]<='c')//如果第一个字符是字母，就说明它是一个运算符
        {
            x=tmp[0];
            scanf("%d%d",&num1,&num2);//后面两端字符代表数字
        }
        else//如果第一个字符是数字
        {
            //atoi:转换为int
            num1=atoi(tmp);//把第一段字符转换为第一个数字
            scanf("%d",&num2);//读入第二个数字
        }
        //进行常规运算
        if(x=='a')
            //sprintf:数组，格式，值，把字符串存储在result里面
            sprintf(result,"%d+%d=%d",num1,num2,num1+num2);
        else if(x=='b')
            sprintf(result,"%d-%d=%d",num1,num2,num1-num2);
        else
            sprintf(result,"%d*%d=%d",num1,num2,num1*num2);
        printf("%s\n",result);//输出result
        printf("%d\n",strlen(result));//输出长度
    }
    return 0;
}
```

# 正则表达式

## 表达

| 字符       | 描述                                                         |
| ---------- | ------------------------------------------------------------ |
| **[ABC]**  | 匹配 **[...]** 中的所有字符                                  |
| **[^ABC]** | 匹配除了 **[...]** 中字符的所有字符                          |
| **[A-Z]**  | **[A-Z]** 表示一个区间，匹配所有大写字母，**[a-z]** 表示所有小写字母。 |
| **.**      | 匹配除换行符**（\n、\r）**之外的任何单个字符，相等于 [^\n\r]。 |
| **[\s\S]** | 匹配所有。\s 是匹配所有空白符，包括换行，\S 非空白符，不包括换行。 |
| **\w**     | 匹配字母、数字、下划线。等价于 **[A-Za-z0-9_]**              |

## scanf中可以用来实现很多功能

###### 用scanf()代替gets()读取一整行存储为字符串 

```c
char *str;
scanf("%[^\n]",str);
printf("%s",str);
```













